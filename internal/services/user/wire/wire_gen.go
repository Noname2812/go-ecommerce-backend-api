// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package userwire

import (
	"database/sql"
	"github.com/Noname2812/go-ecommerce-backend-api/internal/common/protogen/user"
	"github.com/Noname2812/go-ecommerce-backend-api/internal/services/user/application/command/handler"
	"github.com/Noname2812/go-ecommerce-backend-api/internal/services/user/application/messaging"
	"github.com/Noname2812/go-ecommerce-backend-api/internal/services/user/application/query/handler"
	"github.com/Noname2812/go-ecommerce-backend-api/internal/services/user/infrastructure/grpc"
	"github.com/Noname2812/go-ecommerce-backend-api/internal/services/user/infrastructure/messaging"
	"github.com/Noname2812/go-ecommerce-backend-api/internal/services/user/infrastructure/persistence/userinfo"
	"github.com/Noname2812/go-ecommerce-backend-api/internal/services/user/infrastructure/service"
	"github.com/Noname2812/go-ecommerce-backend-api/pkg/kafka"
	"github.com/google/wire"
	"github.com/redis/go-redis/v9"
	"go.uber.org/zap"
)

// Injectors from user.wire.go:

func InitUserQueryHandler(db *sql.DB, logger *zap.Logger) userqueryhandler.UserQueryHandler {
	userInfoRepository := userinforepositoryimpl.NewUserInfoRepository(db)
	userQueryService := userserviceimpl.NewUserQueryService(userInfoRepository)
	userQueryHandler := userqueryhandler.NewUserQueryHandler(userQueryService)
	return userQueryHandler
}

func InitUserCommandHandler(db *sql.DB, logger *zap.Logger, manager *kafka.Manager, redisClient *redis.Client) usercommandhandler.UserCommandHandler {
	userPublisherHandler := useremessagingimpl.NewUserEventPublisher(manager, logger)
	userInfoRepository := userinforepositoryimpl.NewUserInfoRepository(db)
	userCommandService := userserviceimpl.NewUserCommandService(userPublisherHandler, userInfoRepository, redisClient)
	userCommandHandler := usercommandhandler.NewUserCommandHandler(logger, userCommandService)
	return userCommandHandler
}

func InitUserServiceServer(db *sql.DB, logger *zap.Logger) user.UserServiceServer {
	userInfoRepository := userinforepositoryimpl.NewUserInfoRepository(db)
	userServiceServer := userserviceserver.NewUserServiceServer(userInfoRepository)
	return userServiceServer
}

func InitUserConsumer(db *sql.DB, logger *zap.Logger, manager *kafka.Manager, redisClient *redis.Client) usermessaging.UserConsumerHandler {
	userPublisherHandler := useremessagingimpl.NewUserEventPublisher(manager, logger)
	userInfoRepository := userinforepositoryimpl.NewUserInfoRepository(db)
	userCommandService := userserviceimpl.NewUserCommandService(userPublisherHandler, userInfoRepository, redisClient)
	userConsumerHandler := useremessagingimpl.NewUserConsumer(manager, logger, userCommandService)
	return userConsumerHandler
}

// user.wire.go:

var UserRepositorySet = wire.NewSet(userinforepositoryimpl.NewUserInfoRepository)
